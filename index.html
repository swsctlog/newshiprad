<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Bootstrap 5 –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* –ù–µ–±–æ–ª—å—à–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–¥–∞ */
        body {
            background-color: #f0f2f5;
        }
        .info-card {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: none;
            border-radius: 12px;
        }
        .list-group-item {
            background-color: #fff;
            border-bottom: 1px solid #f0f0f0;
        }
        .list-group-item:last-child {
            border-bottom: none;
        }
        .label {
            font-weight: 600;
            color: #555;
        }
        .value {
            color: #000;
            word-break: break-all; /* –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –∫–∞–∫ User-Agent */
        }
        .vpn-yes {
            color: #dc3545; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–∞ */
            font-weight: bold;
        }
        .vpn-no {
            color: #198754; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç */
            font-weight: bold;
        }
        .error-msg {
            color: #dc3545;
            font-size: 0.9rem;
        }
        .spinner-border {
            width: 1.2rem;
            height: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-7">
                <div class="card info-card">
                    <div class="card-header bg-primary text-white text-center">
                        <h4 class="mb-0">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏</h4>
                    </div>
                    <ul class="list-group list-group-flush">
                        <!-- IP –ê–¥—Ä–µ—Å -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">üåç IP-–∞–¥—Ä–µ—Å:</span>
                            <span class="value" id="ip-address">
                                <div class="spinner-border text-primary" role="status"></div>
                            </span>
                        </li>
                        <!-- –°—Ç–∞—Ç—É—Å VPN/–ü—Ä–æ–∫—Å–∏ -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">üõ°Ô∏è VPN/–ü—Ä–æ–∫—Å–∏:</span>
                            <span class="value" id="vpn-status">
                                <div class="spinner-border text-primary" role="status"></div>
                            </span>
                        </li>
                        <!-- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</span>
                            <span class="value" id="location">
                                <div class="spinner-border text-primary" role="status"></div>
                            </span>
                        </li>
                        <!-- –ü—Ä–æ–≤–∞–π–¥–µ—Ä -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">üì° –ü—Ä–æ–≤–∞–π–¥–µ—Ä (ISP):</span>
                            <span class="value" id="isp">
                                <div class="spinner-border text-primary" role="status"></div>
                            </span>
                        </li>
                        <!-- –í—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">‚è∞ –í—Ä–µ–º—è –ø–æ—Å–µ—â–µ–Ω–∏—è:</span>
                            <span class="value" id="visit-time"></span>
                        </li>
                        <!-- –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å -->
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span class="label">‚è≥ –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</span>
                            <span class="value" id="timezone"></span>
                        </li>
                        <!-- –ë—Ä–∞—É–∑–µ—Ä –∏ –û–° -->
                        <li class="list-group-item d-flex flex-column align-items-start">
                            <span class="label mb-1">üíª –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –±—Ä–∞—É–∑–µ—Ä:</span>
                            <span class="value" id="user-agent"></span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ HTML
        function displayData(id, value, className) {
            const element = document.getElementById(id);
            if (element) {
                const spinner = element.querySelector('.spinner-border');
                if(spinner) spinner.remove();
                element.textContent = value;
                if(className) {
                    element.classList.add(className);
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
        function displayError(message) {
             const fields = ['ip-address', 'vpn-status', 'location', 'isp'];
             fields.forEach(id => {
                 displayData(id, message, 'error-msg');
             });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        async function fetchAndDisplayInfo() {
            // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
            const visitTime = new Date().toLocaleString('ru-RU', { dateStyle: 'long', timeStyle: 'medium' });
            const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const userAgent = navigator.userAgent;

            displayData('visit-time', visitTime);
            displayData('timezone', timeZone);
            displayData('user-agent', userAgent);

            // 2. –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ –≤–Ω–µ—à–Ω–µ–º—É API
            try {
                // –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL —Å –ø–æ–¥–¥–æ–º–µ–Ω–æ–º "free."
                const apiUrl = `https://free.freeipapi.com/api/json/`;
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${response.statusText}`);
                }

                const data = await response.json();

                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –Ω–æ–≤–æ–≥–æ API
                displayData('ip-address', data.ipAddress);
                displayData('location', `${data.countryName}, ${data.cityName}`);
                displayData('isp', data.isp);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å VPN/–ü—Ä–æ–∫—Å–∏
                if (data.isProxy) {
                    displayData('vpn-status', '–î–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è', 'vpn-yes');
                } else {
                    displayData('vpn-status', '–ù–µ—Ç', 'vpn-no');
                }

            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö IP:", error);
                displayError(`–û—à–∏–±–∫–∞: ${error.message}`);
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = fetchAndDisplayInfo;
    </script>
</body>
</html>
